<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AURA | Peptides — Conversor</title>

<style>
:root{
  --bg:#0b0c10;
  --card:#111318;
  --line:#242a36;
  --text:#eef2ff;
  --muted:#a7b0c0;
  --accent:#7dd3fc;
}
[data-theme="light"]{
  --bg:#f6f7fb;
  --card:#ffffff;
  --line:#e5e7eb;
  --text:#0b1220;
  --muted:#556072;
  --accent:#2563eb;
}
body{
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  color:var(--text);
}
.wrap{max-width:900px;margin:auto;padding:20px;}
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:20px;
  margin-bottom:20px;
}
input,select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid var(--line);
  background:var(--bg);
  color:var(--text);
}
button{
  padding:10px 15px;
  border-radius:10px;
  border:1px solid var(--line);
  background:var(--card);
  color:var(--text);
  cursor:pointer;
}
.kpi{
  font-size:22px;
  margin:10px 0;
}
.toggle{
  cursor:pointer;
  margin-bottom:15px;
}
</style>
</head>

<body>
<div class="wrap">

<h2>AURA | Peptides — Conversor</h2>
<div class="toggle" id="themeToggle">Alternar Tema</div>

<div class="card">
<h3>Produto</h3>
<select id="productSelect"></select>
<select id="doseSelect"></select>

<label>Total no vial (mg)</label>
<input id="vialMg" type="number" value="10" step="0.01">

<label>Diluição (mL)</label>
<input id="dilutionMl" type="number" value="2" step="0.01">

<label>Dose</label>
<input id="doseValue" type="number" value="0.25" step="0.01">

<select id="doseUnit">
<option value="mg">mg</option>
<option value="mcg">mcg</option>
<option value="ui">UI</option>
</select>

<button id="copyLinkBtn">Copiar link</button>
<button id="resetBtn">Reset</button>
</div>

<div class="card">
<h3>Resultado</h3>
<div class="kpi" id="uiExact">—</div>
<div class="kpi" id="mlExact">—</div>
</div>

</div>

<script>

const qs = id => document.getElementById(id);

const PEPTIDES = {
"BPC-157":["2 MG","5 MG","10 MG"],
"TB-500":["2 MG","5 MG","10 MG"],
"Retatrutide":["10 MG","20 MG","60 MG"],
"Tirzepatide":["5 MG","10 MG","60 MG"],
"Semaglutide":["2 MG","5 MG","10 MG"]
};

function populateProducts(){
  const sel = qs("productSelect");
  sel.innerHTML="";
  Object.keys(PEPTIDES).forEach(p=>{
    const opt=document.createElement("option");
    opt.value=p;
    opt.textContent=p;
    sel.appendChild(opt);
  });
}

function populateDoses(product){
  const sel=qs("doseSelect");
  sel.innerHTML="";
  PEPTIDES[product].forEach(d=>{
    const opt=document.createElement("option");
    opt.value=d;
    opt.textContent=d;
    sel.appendChild(opt);
  });
  setDoseValue();
}

function setDoseValue(){
  const dose=qs("doseSelect").value;
  const numeric=parseFloat(dose.replace(/[^\d.]/g,""));
  qs("vialMg").value=numeric;
  update();
}

function update(){
  const vialMg=parseFloat(qs("vialMg").value);
  const dilution=parseFloat(qs("dilutionMl").value);
  const dose=parseFloat(qs("doseValue").value);
  const unit=qs("doseUnit").value;

  if(!vialMg||!dilution||!dose){
    qs("uiExact").textContent="—";
    qs("mlExact").textContent="—";
    return;
  }

  let doseMg;
  if(unit==="mg") doseMg=dose;
  else if(unit==="mcg") doseMg=dose/1000;
  else doseMg=(dose/100)*(vialMg/dilution);

  const ui=(doseMg*dilution/vialMg)*100;
  const ml=ui/100;

  qs("uiExact").textContent=`${ui.toFixed(2)} UI`;
  qs("mlExact").textContent=`${ml.toFixed(3)} mL`;
}

function copyLink(){
  const params=new URLSearchParams({
    v:qs("vialMg").value,
    d:qs("dilutionMl").value,
    dose:qs("doseValue").value,
    u:qs("doseUnit").value
  });
  const url=location.origin+location.pathname+"?"+params.toString();
  navigator.clipboard.writeText(url);
  alert("Link copiado");
}

function resetAll(){
  qs("vialMg").value=10;
  qs("dilutionMl").value=2;
  qs("doseValue").value=0.25;
  qs("doseUnit").value="mg";
  update();
}

function applyParams(){
  const p=new URLSearchParams(location.search);
  if(p.get("v")) qs("vialMg").value=p.get("v");
  if(p.get("d")) qs("dilutionMl").value=p.get("d");
  if(p.get("dose")) qs("doseValue").value=p.get("dose");
  if(p.get("u")) qs("doseUnit").value=p.get("u");
}

function setTheme(theme){
  document.documentElement.setAttribute("data-theme",theme);
  localStorage.setItem("theme",theme);
}

function initTheme(){
  const saved=localStorage.getItem("theme")||"dark";
  setTheme(saved);
}

qs("productSelect").addEventListener("change",e=>populateDoses(e.target.value));
qs("doseSelect").addEventListener("change",setDoseValue);
qs("vialMg").addEventListener("input",update);
qs("dilutionMl").addEventListener("input",update);
qs("doseValue").addEventListener("input",update);
qs("doseUnit").addEventListener("change",update);
qs("copyLinkBtn").addEventListener("click",copyLink);
qs("resetBtn").addEventListener("click",resetAll);
qs("themeToggle").addEventListener("click",()=>{
  const current=document.documentElement.getAttribute("data-theme");
  setTheme(current==="dark"?"light":"dark");
});

populateProducts();
populateDoses("BPC-157");
initTheme();
applyParams();
update();

</script>
</body>
</html>
